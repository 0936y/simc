mage="Mage_Fire_T16H"
level=90
race=troll
role=spell
position=back
professions=tailoring=600/engineering=600
talents=http://us.battle.net/wow/en/tool/talent-calculator#eZ!0...11.
glyphs=combustion/counterspell
spec=fire

# This default action priority list is automatically created based on your character.
# It is a attempt to provide you with a action list that is both simple and practicable,
# while resulting in a meaningful and good simulation. It may not result in the absolutely highest possible dps.
# Feel free to edit, adapt and improve it to your own needs.
# SimulationCraft is always looking for updates and improvements to the default action lists.

# Executed before combat begins. Accepts non-harmful actions only.

actions.precombat=flask,type=warm_sun
actions.precombat+=/food,type=mogu_fish_stew
actions.precombat+=/arcane_brilliance
actions.precombat+=/molten_armor
actions.precombat+=/snapshot_stats
actions.precombat+=/rune_of_power,if=talent.rune_of_power.enabled
actions.precombat+=/jade_serpent_potion

# Executed every time the actor is available.

actions=counterspell,if=target.debuff.casting.react
actions+=/cold_snap,if=talent.cold_snap.enabled&health.pct<30
actions+=/time_warp
actions+=/rune_of_power,if=talent.rune_of_power.enabled&buff.rune_of_power.remains<cast_time
actions+=/run_action_list,name=combust_sequence,if=pyro_chain
# Start regular POM-Combustion combo if CDs are up; Wait for trinket proc if player has PBoI
actions+=/run_action_list,name=init_pom_combust,if=cooldown.combustion.up&cooldown.presence_of_mind.up&(trinket.stat.intellect.cooldown_remains>95|trinket.stat.intellect.cooldown_remains+20>time_to_die)
# Cast RoP or MI only when player does not have both HU, Pyro proc and fireball mid flight - this causes Proc munching
actions+=/rune_of_power,if=talent.rune_of_power.enabled&(buff.rune_of_power.remains<4*action.fireball.execute_time&(buff.heating_up.down|buff.pyroblast.down|!action.fireball.in_flight))
actions+=/blood_fury,if=target.time_to_die<18
actions+=/berserking,if=target.time_to_die<18
actions+=/arcane_torrent,if=target.time_to_die<18
actions+=/jade_serpent_potion
actions+=/run_action_list,name=aoe,if=active_enemies>=5
# Camp for HU/Pyro procs in preparation for combustion combos
actions+=/run_action_list,name=proc_builder,if=trinket.stat.intellect.cooldown_remains<action.fireball.execute_time
actions+=/run_action_list,name=single_target

# Pyro-chain combustion sequence
actions.combust_sequence=start_pyro_chain,if=!pyro_chain
# Unload all HS Pyros first
actions.combust_sequence+=/pyroblast,if=buff.pyroblast.up
# Early combustion if meta gem is about to fade and only POM left
actions.combust_sequence+=/combustion,if=buff.tempus_repit.up&buff.tempus_repit.remains<gcd
# The next two line uses POM pyro if it is expected to grow the ignite. To do this, it retrieves tick timing for ignite, calculates estimated damage from POM pyro and the potential instant pyro, and compares the ignite from those pyros against the ignite tick size.
actions.combust_sequence+=/pyroblast,if=buff.presence_of_mind.up&buff.pyroblast.down&(travel_time<=dot.ignite.remains-2*(dot.ignite.ticks_remain-1)|((crit_damage*crit_pct_current+hit_damage*(100-crit_pct_current))*0.01*mastery_value>=dot.ignite.tick_dmg))
actions.combust_sequence+=/pyroblast,if=buff.presence_of_mind.up&buff.pyroblast.down&(gcd+travel_time<=dot.ignite.remains-2)&(crit_damage*crit_pct_current+hit_damage*(100-crit_pct_current))*0.01*(0.0125*crit_pct_current+1)*mastery_value>=dot.ignite.tick_dmg
actions.combust_sequence+=/combustion
actions.combust_sequence+=/stop_pyro_chain,if=pyro_chain

# Initiate regular POM-Combustion sequence
actions.init_pom_combust=run_action_list,name=proc_builder,if=buff.pyroblast.down|buff.heating_up.down|!action.fireball.in_flight
actions.init_pom_combust+=/start_pyro_chain,if=!pyro_chain

# Proc building sequence - Generate HS+HU with Pyro camping
actions.proc_builder=pyroblast,if=buff.pyroblast.up&buff.heating_up.up&action.fireball.in_flight
actions.proc_builder+=/living_bomb,cycle_targets=1,if=talent.living_bomb.enabled&((!ticking|remains<tick_time)&target.time_to_die>tick_time*3)
actions.proc_builder+=/inferno_blast,if=(buff.pyroblast.down&buff.heating_up.up)|(buff.pyroblast.up&buff.heating_up.down&!action.fireball.in_flight&!action.pyroblast.in_flight)
actions.proc_builder+=/fireball
actions.proc_builder+=/scorch,moving=1

# Standard AoE sequence
actions.aoe=inferno_blast,if=dot.combustion.ticking
actions.aoe+=/flamestrike

# Standard single target sequence
actions.single_target=inferno_blast,if=dot.combustion.ticking&active_enemies>1
# Use HS procs before they run out
actions.single_target+=/pyroblast,if=buff.pyroblast.up&buff.pyroblast.remains<action.fireball.execute_time
# Intentionally sustain 2T16 4 stack or more
actions.single_target+=/pyroblast,if=set_bonus.tier16_2pc_caster&buff.pyroblast.up&buff.potent_flames.stack>=4&buff.potent_flames.remains<action.fireball.execute_time
# Pyro camp during regular sequence; Do not use Pyro procs without HU and first using fireball
actions.single_target+=/pyroblast,if=buff.pyroblast.up&buff.heating_up.up&action.fireball.in_flight
actions.single_target+=/living_bomb,cycle_targets=1,if=talent.living_bomb.enabled&((!ticking|remains<tick_time)&target.time_to_die>tick_time*3)
actions.single_target+=/inferno_blast,if=buff.pyroblast.down&buff.heating_up.up
# Mini-pyro chain on last few seconds of BBoY/Wooshoolays
actions.single_target+=/pyroblast,if=trinket.stat.intellect.cooldown_remains>0&trinket.stacking_proc.intellect.up&trinket.stacking_proc.intellect.remains<3*gcd&execute_time=gcd
actions.single_target+=/pyroblast,if=cooldown.combustion.remains>0&trinket.stacking_proc.intellect.up&trinket.stacking_proc.intellect.remains<3*gcd&execute_time=gcd
actions.single_target+=/inferno_blast,if=buff.pyroblast.up&buff.heating_up.down&!action.fireball.in_flight
actions.single_target+=/fireball
actions.single_target+=/scorch,moving=1

head=hood_of_swirling_senses,id=105420,upgrade=4,gems=sinister_primal_160crit_160hit_180int
neck=untainted_guardians_chain,id=105465,upgrade=4
shoulders=chronomancer_mantle,id=99401,upgrade=4,gems=160exp_160crit_160exp_160crit_120int,enchant=200int_100crit
back=xingho_breath_of_yulon,id=102246,upgrade=4,gems=160exp_160crit_60int,enchant=lightweave_embroidery_3
chest=chronomancer_robes,id=99400,upgrade=4,gems=160exp_160crit_160exp_160crit_160exp_160crit_180int,enchant=80all
wrists=bracers_of_sonic_projection,id=105626,upgrade=4,enchant=180int
hands=chronomancer_gloves,id=99397,upgrade=4,gems=160exp_160crit_160exp_160crit_120int,enchant=170haste,addon=synapse_springs_mark_ii
waist=miasmic_skullbelt,id=105569,upgrade=4,gems=160exp_160crit_320crit_320crit_120int
legs=chronomancer_leggings,id=99399,upgrade=4,gems=320crit_320crit_120int,enchant=285int_165crit
feet=toxic_tornado_treads,id=105537,upgrade=4,gems=160crit_160hit_60hit,enchant=140mastery
finger1=signet_of_the_dinomancers,id=105606,upgrade=4,gems=160exp_160crit_60haste
finger2=petrified_pennyroyal_ring,id=105443,upgrade=4
trinket1=black_blood_of_yshaarj,id=105648,upgrade=4
trinket2=purified_bindings_of_immerseus,id=105422,upgrade=4
main_hand=immaculately_preserved_wand,id=105594,upgrade=4,gems=160exp_160crit_60int,enchant=jade_spirit
off_hand=revelations_of_yshaarj,id=105650,upgrade=4,gems=160exp_160crit_60int,enchant=165int

# Gear Summary
# gear_strength=80
# gear_agility=80
# gear_stamina=1735
# gear_intellect=3111
# gear_spell_power=640
# gear_expertise_rating=1920
# gear_hit_rating=380
# gear_crit_rating=4366
# gear_haste_rating=704
# gear_mastery_rating=588
# gear_armor=306
# meta_gem=sinister_primal
# tier16_2pc_caster=1
# tier16_4pc_caster=1
