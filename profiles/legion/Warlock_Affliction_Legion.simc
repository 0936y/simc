warlock="Warlock_Affliction_T18M"
level=104
race=troll
role=spell
position=back
talents=3103123
spec=affliction

actions.precombat+=/summon_pet,if=!talent.demonic_servitude.enabled&(!talent.grimoire_of_sacrifice.enabled|buff.demonic_power.down)
actions.precombat+=/summon_doomguard,if=talent.demonic_servitude.enabled&active_enemies<3
actions.precombat+=/summon_infernal,if=talent.demonic_servitude.enabled&active_enemies>=3
actions.precombat+=/snapshot_stats
actions.precombat+=/grimoire_of_sacrifice,if=talent.grimoire_of_sacrifice.enabled&!talent.demonic_servitude.enabled

#actions=summon_doomguard,if=!talent.demonic_servitude.enabled&spell_targets.infernal_awakening<3
actions+=/summon_infernal,if=!talent.demonic_servitude.enabled&spell_targets.infernal_awakening>=3
actions+=/service_voidwalker,if=active_enemies>=3
actions+=/service_pet,if=active_enemies<3
actions+=/phantom_singularity
actions+=/soul_harvest
actions+=/mana_tap,if=buff.mana_tap.remains<=buff.mana_tap.duration*0.3&target.time_to_die>buff.mana_tap.duration*0.3
actions+=/unstable_affliction,if=(soul_shard>1|cooldown.summon_doomguard.remains>5|talent.demonic_servitude.enabled)&(!talent.contagion.enabled|soul_shard>4|!dot.unstable_affliction.ticking)
actions+=/agony,if=remains<=duration*0.3
actions+=/corruption,if=remains<=duration*0.3
actions+=/haunt
actions+=/siphon_life,if=remains<=duration*0.3
actions+=/drain_soul,chain=1,interrupt=1
actions+=/drain_life,chain=1,interrupt=1
actions+=/life_tap,if=mana.pct<=10

gear_intellect=10681
gear_spell_power=2925
gear_crit_rating=3193
gear_haste_rating=1798
gear_mastery_rating=2259
gear_versatility_rating=323

default_pet=felhunter